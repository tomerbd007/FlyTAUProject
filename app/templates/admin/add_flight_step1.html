{% extends "base.html" %}

{% block title %}Add Flight - Step 1 - FLYTAU Admin{% endblock %}

{% block content %}
<style>
    /* Ombre background */
    body {
        background: linear-gradient(180deg, #e8f6ff 0%, #f7fcff 60%, #ffffff 100%);
        color: #06232b;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        margin: 0;
        padding: 0;
    }

    /* Top navigation */
    .top-nav {
        background: rgba(255,255,255,0.96);
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        gap: 18px;
        align-items: center;
        box-shadow: 0 1px 6px rgba(2,32,47,0.06);
        position: sticky;
        top: 0;
        z-index: 50;
    }
    .top-nav .brand { font-weight: 700; color: #004b71; font-size: 1.05rem; text-decoration: none; }
    .top-nav .links { display:flex; gap:16px; align-items:center; }
    .top-nav a { color: #004b71; text-decoration: none; font-weight: 600; }

    /* Main content */
    .main-content {
        min-height: calc(100vh - 200px);
        padding: 20px;
    }

    /* Footer */
    .footer {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        text-align: center;
        color: #235366;
        border-top: 1px solid #d7e9f5;
    }

    @media (max-width: 760px) {
        .top-nav { padding: 10px 14px; }
        .top-nav .links { display: none; }
    }

    .auth-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 70vh;
    }
</style>

<div class="auth-container">
    <div>
        <div class="admin-header">
            <a href="{{ url_for('admin_flights') }}" class="back-link">← Back to Flights</a>
            <h1>Add New Flight</h1>
        </div>

        <div class="wizard-container">
            <div class="wizard-steps">
                <div class="step active">
                    <span class="step-number">1</span>
                    <span class="step-label">Route & Schedule</span>
                </div>
                <div class="step">
                    <span class="step-number">2</span>
                    <span class="step-label">Aircraft & Crew</span>
                </div>
                <div class="step">
                    <span class="step-number">3</span>
                    <span class="step-label">Pricing</span>
                </div>
            </div>
            
            <div class="wizard-content">
                <h2>Step 1: Select Route and Schedule</h2>
                
                <form method="POST" action="{{ url_for('admin_add_flight') }}" class="wizard-form">
                    <div class="form-section">
                        <h3>Route</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="origin">Origin Airport</label>
                                <select id="origin" name="origin" required>
                                    <option value="">Select origin...</option>
                                    {% for airport in airports %}
                                    <option value="{{ airport.code }}" {% if request.form.get('origin') == airport.code %}selected{% endif %}>
                                        {{ airport.name }} ({{ airport.code }})
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="destination">Destination Airport</label>
                                <select id="destination" name="destination" required>
                                    <option value="">Select destination...</option>
                                    {% for airport in airports %}
                                    <option value="{{ airport.code }}" {% if request.form.get('destination') == airport.code %}selected{% endif %}>
                                        {{ airport.name }} ({{ airport.code }})
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Schedule</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="departure_date">Departure Date</label>
                                <input type="date" 
                                       id="departure_date" 
                                       name="departure_date" 
                                       required
                                       min="{{ min_date }}"
                                       value="{{ request.form.get('departure_date', '') }}">
                            </div>
                            
                            <div class="form-group">
                                <label for="departure_time">Departure Time</label>
                                <input type="time" 
                                       id="departure_time" 
                                       name="departure_time" 
                                       required
                                       value="{{ request.form.get('departure_time', '08:00') }}">
                            </div>
                        </div>
                        
                        <div class="form-hint-box">
                            <p><strong>Note:</strong> The arrival time will be calculated automatically based on the route duration.</p>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Flight Number</h3>
                        
                        <div class="form-group">
                            <label for="flight_number">Flight Number</label>
                            <input type="text" 
                                   id="flight_number" 
                                   name="flight_number" 
                                   required
                                   pattern="TAU[0-9]{3,4}"
                                   placeholder="TAU101"
                                   title="Format: TAU followed by 3-4 digits"
                                   value="{{ request.form.get('flight_number', suggested_flight_number) }}">
                            <small class="form-hint">Format: TAU followed by 3-4 digits (e.g., TAU101)</small>
                        </div>
                    </div>
                    
                    <div class="wizard-actions">
                        <a href="{{ url_for('admin_flights') }}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-primary">
                            Continue to Aircraft & Crew →
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
